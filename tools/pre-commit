#!/usr/bin/env bash
set -e
set -o pipefail
set -u

LANG=C

# shellcheck disable=SC2034
ECHO_PRE_OK="$0 ✓"
# shellcheck disable=SC2034
ECHO_PRE_INST="$0 +"
# shellcheck disable=SC2034
ECHO_PRE_ERR="$0 ❌"

# Pre-commit git hook

# Normalize
rm -rf "build"

# Check codebase changes
SKIP=gitlab-ci-linter pre-commit # Temporary workaround until https://gitlab.com/devopshq/gitlab-ci-linter/-/issues/3 is fixed

# Run quick test set
tools/test
